(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{22:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var r=t(2),c=t.n(r),a=t(16),u=t.n(a),o=t(17),i=t(3),s=(t(22),t(0)),d=function(e){var n=e.searchTerm,t=e.handleSearchTermChange;return Object(s.jsxs)("div",{children:["search: ",Object(s.jsx)("input",{value:n,onChange:t})]})},h=function(e){var n=e.newName,t=e.handleNameChange,r=e.newNumber,c=e.handleNumberChange,a=e.addPerson;return Object(s.jsxs)("form",{onSubmit:a,children:[Object(s.jsxs)("div",{children:["name: ",Object(s.jsx)("input",{value:n,onChange:t})]}),Object(s.jsxs)("div",{children:["phone: ",Object(s.jsx)("input",{value:r,onChange:c})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{type:"submit",children:"add"})})]})},b=function(e){var n=e.id,t=e.name,r=e.number,c=e.handleDelete;return Object(s.jsxs)("li",{children:[t," ",r,Object(s.jsx)("button",{onClick:function(){return c(n)},children:"delete"})]})},l=function(e){var n=e.persons,t=e.searchTerm,r=e.handleDelete;return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("h2",{children:"Numbers"}),Object(s.jsx)("ul",{children:n.filter((function(e){return e.name.toLowerCase().includes(t)})).map((function(e){var n=e.name,t=e.number,c=e.id;return Object(s.jsx)(b,{name:n,number:t,handleDelete:r,id:c},n)}))})]})},j=function(e){var n=e.message,t=n.msg,r=n.success;if(!t)return null;var c="notification ".concat(r?"success":"error");return Object(s.jsx)("div",{className:c,children:t})},f=t(5),m=t.n(f),O="/api/persons",v=function(){return m.a.get(O).then((function(e){return e.data}))},p=function(e){return m.a.post(O,e).then((function(e){return e.data}))},x=function(e){return m.a.delete("".concat(O,"/").concat(e)).then((function(e){return e.data}))},g=function(e,n){return m.a.put("".concat(O,"/").concat(e),n).then((function(e){return e.data}))},w=function(){var e=Object(r.useState)([]),n=Object(i.a)(e,2),t=n[0],c=n[1],a=Object(r.useState)(""),u=Object(i.a)(a,2),b=u[0],f=u[1],m=Object(r.useState)(""),O=Object(i.a)(m,2),w=O[0],C=O[1],N=Object(r.useState)(""),k=Object(i.a)(N,2),S=k[0],T=k[1],y=Object(r.useState)({}),D=Object(i.a)(y,2),P=D[0],E=D[1];Object(r.useEffect)((function(){v().then((function(e){return c(e)}))}),[]);var F=function(){f(""),C("")},J=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];E({msg:e,success:n}),setTimeout((function(){return E({})}),5e3)},B=function(e,n){g(e,n).then((function(n){c(t.map((function(t){return t.id===e?n:t}))),F(),J("".concat(n.name," has been updated"))})).catch((function(r){F(),r.response.data.error&&J(r.response.data.error),J("".concat(n.name," has already been deleted"),!1),c(t.filter((function(n){return n.id!==e})))}))};return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("h2",{children:"Phonebook"}),Object(s.jsx)(j,{message:P}),Object(s.jsx)(d,{searchTerm:S,handleSearchTermChange:function(e){return T(e.target.value)}}),Object(s.jsx)(h,{newName:b,handleNameChange:function(e){return f(e.target.value)},newNumber:w,handleNumberChange:function(e){return C(e.target.value)},addPerson:function(e){e.preventDefault();var n={name:b,number:w};if(u=b,t.some((function(e){return e.name===u}))){var r="".concat(b," is already added to the phonebook, replace the old number with the new one");if(window.confirm(r)){var a=t.find((function(e){return e.name===b}));return void B(a.id,n)}}else{var u;p(n).then((function(e){c([].concat(Object(o.a)(t),[e])),F(),J("".concat(e.name," has been secusfully added to the phonebook"))})).catch((function(e){J(e.response.data.error,!1)}))}}}),Object(s.jsx)(l,{persons:t,searchTerm:S,handleDelete:function(e){var n=t.find((function(n){return n.id===e}));window.confirm("delete ".concat(n.name,"?"))&&x(e).then((function(){c(t.filter((function(n){return n.id!==e}))),J("".concat(n.name," has been successfully deleted from the phonebook"))}))}})]})};u.a.render(Object(s.jsx)(c.a.StrictMode,{children:Object(s.jsx)(w,{})}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.13b24420.chunk.js.map